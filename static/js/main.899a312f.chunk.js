(this["webpackJsonpweb-phone-verify"]=this["webpackJsonpweb-phone-verify"]||[]).push([[0],{102:function(e,t,o){},113:function(e,t,o){"use strict";o.r(t);var n=o(8),r=o(1),a=o.n(r),i=o(14),s=o.n(i),c=(o(102),o(37)),l=o(38),d=o(44),u=o(43),h=o(79),f=o(17),m=o(39),p=o(152),b=o(7),j=o(150),g=o(141),x=o(142),v=o(143),O=o(144),y=o(145),C=o(147),F=o(148),w=o(146),k=o(63),S=o.n(k),N=o(155),M=o(153),I=Object(b.a)({root:{"& label.Mui-focused":{color:"##1E90FF"},"& .MuiInput-underline:after":{borderBottomColor:"##1E90FF"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#1E90FF"},"&:hover fieldset":{borderColor:"#1E90FF"},"&.Mui-focused fieldset":{borderColor:"##1E90FF"}}}})(j.a),E=function(e){Object(d.a)(o,e);var t=Object(u.a)(o);function o(e){var n;return Object(c.a)(this,o),(n=t.call(this,e)).inputStyles={marginBottom:"20px"},n.state={userName:"",open:!1,errorMessage:null,loading:!1},n}return Object(l.a)(o,[{key:"handleClose",value:function(e,t){"clickaway"!==t&&this.setState({open:!1})}},{key:"handleChangeFormData",value:function(e){var t=e.target.name;this.setState(Object(m.a)({},t,e.target.value.trim()))}},{key:"performSearch",value:function(e){var t=this;e.preventDefault();var o=this,n="https://tarabartest.firebaseio.com/Members/".concat(this.state.userName,".json");fetch(n).then((function(e){return e.text()})).then((function(e){e&&"null"!==e&&""!==e?t.props.history.push("/recoveryAccount/".concat(t.state.userName)):(console.log("Member is not found!"),o.setState({open:!0,errorMessage:"Member is not found!",loading:!1}))}),(function(e){console.error("performLogin()",e),o.setState({open:!0,errorMessage:"Sorry, server cannot be communicated.",loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(n.jsxs)(a.a.Fragment,{children:[Object(n.jsx)(g.a,{style:{background:"white"},children:Object(n.jsxs)(p.a,{children:[Object(n.jsx)(x.a,{className:t.demoWrapImg,children:Object(n.jsxs)(v.a,{container:!0,children:[Object(n.jsx)(v.a,{item:!0,xs:1,md:4,lg:4,children:Object(n.jsx)(p.a,{style:{width:"100%"}})}),Object(n.jsxs)(v.a,{item:!0,xs:10,md:4,lg:4,children:[Object(n.jsx)(p.a,{m:3}),Object(n.jsx)(O.a,{style:this.inputStyles,children:Object(n.jsx)(I,{className:t.margin,label:"User Name",variant:"outlined",autoFocus:!0,name:"userName",id:"user-name-outlined-input",required:!0,onChange:function(t){return e.handleChangeFormData(t)}})}),Object(n.jsxs)("div",{style:{position:"relative"},children:[Object(n.jsx)(y.a,{type:"submit",variant:"text",style:{backgroundColor:"#1E90FF",color:"#fff",textTransform:"none",width:"100%",fontSize:"23px",margin:"10mm 0 5mm 0",opacity:this.state.loading?"0.5":"1"},onClick:function(t){return e.performSearch(t)},children:"Search"}),this.state.loading&&Object(n.jsx)(w.a,{size:30,className:t.buttonProgress})]})]})]})}),Object(n.jsxs)(p.a,{className:t.demoWrapText,children:[Object(n.jsx)(C.a,{onClick:function(){e.props.history.goBack()},children:Object(n.jsx)(S.a,{style:{color:"#ffffff"}})}),Object(n.jsx)(p.a,{m:2,children:Object(n.jsx)(F.a,{variant:"h4",align:"center",className:t.title,children:"Password Recovery"})})]})]})}),Object(n.jsx)(N.a,{open:this.state.open,autoHideDuration:6e3,onClose:function(){return e.handleClose()},children:Object(n.jsx)(M.a,{elevation:6,variant:"filled",onClose:function(){return e.handleClose()},severity:"error",children:this.state.errorMessage||"Sorry, something went wrong."})})]})}}]),o}(a.a.Component),P=Object(b.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1)}},demoWrapText:{backgroundColor:"#1E90FF",color:"#ffffff",textTransform:"none",fontSize:"23px",top:"0",left:"0",width:"100%",height:"300px",opicity:1,position:"absolute"},demoWrapImg:{width:"100%",margin:"280px auto",padding:"10px",zIndex:2,position:"relative",textAlign:"center",marginBottom:"0",background:"#ffffff",borderRadius:"5%",maxWidth:"100%"},buttonProgress:{color:" green[500]",position:"absolute",top:"50px",left:"50%",marginLeft:-16}}}),{withTheme:!0})(E),R=o(66),W=o(158),T=o(159),z=o(157),D=o(149),A=o(53);A.a.initializeApp({apiKey:"AIzaSyAD43Q9Oz-PbfJIgFkrPwwEQDHyOE5jYJE",authDomain:"dev1tarabar.firebaseapp.com",databaseURL:"https://dev1tarabar.firebaseio.com",projectId:"dev1tarabar",storageBucket:"dev1tarabar.appspot.com",messagingSenderId:"834633851989",appId:"1:834633851989:web:b5ff73320702d39299e0dc",measurementId:"G-3PQJN89R70"});var B=A.a.auth,J={"& label.Mui-focused":{color:"##1E90FF"},"& .MuiInput-underline:after":{borderBottomColor:"##1E90FF"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#1E90FF"},"&:hover fieldset":{borderColor:"#1E90FF"},"&.Mui-focused fieldset":{borderColor:"##1E90FF"}}},L=function(e){Object(d.a)(o,e);var t=Object(u.a)(o);function o(e){var n;return Object(c.a)(this,o),(n=t.call(this,e)).inputStyles={marginBottom:"20px"},n.state={verificationCode:"",phoneNo:"",open:!1,errorMessage:null,loading:!1,memberForRecovery:{}},n}return Object(l.a)(o,[{key:"handleChangeFormData",value:function(e){var t=e.target.name;this.setState(Object(m.a)({},t,e.target.value.trim()))}},{key:"handleClose",value:function(e,t){"clickaway"!==t&&this.setState({open:!1})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.userName,o="https://tarabartest.firebaseio.com/Members/".concat(t,".json");this.setState({loading:!0}),fetch(o).then((function(e){return e.text()})).then((function(t){if(t&&"null"!==t&&""!==t){if(!(t=JSON.parse(t)).phoneNo)return;e.setState({phoneNo:t.phoneNo,loading:!1,memberForRecovery:t});var o=new A.a.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:function(e){console.log("success",e)}}),n="";if(e.state.phoneNo.startsWith("09"))for(var r=e.state.phoneNo.split("09"),a=1;a<r.length;a++)n+=r[a];n="+959".concat(n),B().signInWithPhoneNumber(n,o).then((function(e){console.log("success",e),window.confirmationResult=e})).catch((function(t){console.log(t),e.setState({open:!0,errorMessage:"Invalid phone No.",loading:!1})}))}else e.setState({open:!0,errorMessage:"User does not exist, please register now.",loading:!1})}),(function(t){console.error("performRecoveryAccountWithPhoneNo()",t),e.setState({open:!0,errorMessage:"Sorry, server cannot be communicated.",loading:!1})}))}},{key:"performRecoveryAccountWithPhoneNo",value:function(e){e.preventDefault();var t=this;window.confirmationResult.confirm(this.state.verificationCode).then((function(e){console.log("Confirmation verification is successfully!"),window.location.href="".concat(window.ref,"/tarabar/resources/showmenu/memberDetail/").concat(this.state.memberForRecovery.personCode,"?password_recovery_key=").concat(this.state.verificationCode,"&personCode=").concat(this.state.memberForRecovery.personCode,"&userName=").concat(this.state.memberForRecovery.name)})).catch((function(e){console.log(e),t.setState({open:!0,errorMessage:"Wrong Verifiaction Code. Please, try again.",loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.props,o=t.classes,r=t.theme;return Object(n.jsxs)(D.a,{theme:r,children:[Object(n.jsx)(p.a,{id:"recaptcha-container"}),Object(n.jsxs)(g.a,{style:{background:"white"},children:[Object(n.jsxs)(p.a,{children:[Object(n.jsx)(x.a,{className:o.demoWrapImg,children:Object(n.jsxs)(v.a,{container:!0,children:[Object(n.jsx)(v.a,{item:!0,xs:1,md:4,lg:4,children:Object(n.jsx)(p.a,{style:{width:"100%"}})}),Object(n.jsx)(v.a,{item:!0,xs:10,md:4,lg:4,children:Object(n.jsxs)("form",{autoComplete:"off",onSubmit:function(t){return e.performRecoveryAccountWithPhoneNo(t)},children:[Object(n.jsx)("p",{style:{textAlign:"center",fontSize:"18px",color:"#1E90FF"},children:"Verification Code"}),Object(n.jsxs)("p",{style:{textAlign:"center",fontSize:"16px",color:"rgb(117 167 216)"},children:["Please type the verification code sent to ",this.state.phoneNo]}),Object(n.jsxs)(W.a,{variant:"outlined",className:o.commonInputClass,children:[Object(n.jsx)(T.a,{htmlFor:"outlined-adornment-verification",children:"Verification Code"}),Object(n.jsx)(z.a,{name:"verificationCode",required:!0,id:"outlined-adornment-verification",type:"text",value:this.state.verificationCode,onChange:function(t){return e.handleChangeFormData(t)},labelWidth:126})]}),Object(n.jsx)(y.a,{type:"submit",variant:"text",style:{backgroundColor:"#1E90FF",color:"#fff",textTransform:"none",width:"100%",fontSize:"23px",margin:"10mm 0 5mm 0",opacity:this.state.loading?"0.5":"1"},children:"Verify"}),this.state.loading&&Object(n.jsx)(w.a,{size:30,className:o.buttonProgress})]})})]})}),Object(n.jsxs)(p.a,{className:o.demoWrapText,children:[Object(n.jsx)(C.a,{onClick:function(){e.props.history.goBack()},children:Object(n.jsx)(S.a,{style:{color:"#ffffff"}})}),Object(n.jsx)(p.a,{m:2,children:Object(n.jsx)(F.a,{variant:"h4",align:"center",className:o.title,children:"Password Recovery"})})]})]}),Object(n.jsx)(N.a,{open:this.state.open,autoHideDuration:6e3,onClose:function(){return e.handleClose()},children:Object(n.jsx)(M.a,{elevation:6,variant:"filled",onClose:function(){return e.handleClose()},severity:"error",children:this.state.errorMessage||"Sorry, something went wrong."})})]})]})}}]),o}(a.a.Component),V=Object(b.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1)}},demoWrapText:{backgroundColor:"#1E90FF",color:"#ffffff",textTransform:"none",fontSize:"23px",top:"0",left:"0",width:"100%",height:"300px",opicity:1,position:"absolute"},demoWrapImg:{width:"100%",margin:"280px auto",padding:"10px",zIndex:2,position:"relative",textAlign:"center",marginBottom:"0",background:"#ffffff",borderRadius:"5%",maxWidth:"100%"},commonInputClass:Object(R.a)(Object(R.a)({},J),{},{width:"100%"}),wrapper:{margin:e.spacing(1),position:"relative"},buttonSuccess:{backgroundColor:"green[500]","&:hover":{backgroundColor:"green[700]"}},buttonProgress:{color:" green[500]",position:"absolute",top:"70%",left:"50%",marginTop:-12,marginLeft:-12},title:{"line-height":"55px","-webkit-line-clamp":4,"-webkit-box-orient":"vertical","text-overflow":"ellipsis",overflow:"hidden",display:"-webkit-box"}}}),{withTheme:!0})(L),H=function(e){Object(d.a)(o,e);var t=Object(u.a)(o);function o(e){var n;return Object(c.a)(this,o),n=t.call(this,e),window.ref=document.referrer.split("/tarabar")[0],n}return Object(l.a)(o,[{key:"render",value:function(){return Object(n.jsx)(h.a,{children:Object(n.jsxs)(f.c,{children:[Object(n.jsx)(f.a,{path:"/recoveryAccount/:userName",component:V}),Object(n.jsx)(f.a,{component:P})]})})}}]),o}(r.Component),Q=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,161)).then((function(t){var o=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;o(e),n(e),r(e),a(e),i(e)}))};s.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(H,{})}),document.getElementById("root")),Q()}},[[113,1,2]]]);
//# sourceMappingURL=main.899a312f.chunk.js.map